<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>search</title>
	<style type="text/css">
		.suggest{
			background-color: #fff;
			width: 350px;
			border:1px solid #999;
		}
		.suggest ul{
			list-style: none;
			margin: 0;
			padding:0; 
		}
		.suggest ul li{
			padding: 3px;
			font-size: 14px;
			line-height: 25px;
			cursor: pointer;
		}
		.suggest ul li:hover{
			background-color: red;

		}
	</style>
	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script>
	//var getDOM = function(){
		//return document.getElementById(id);
	//};
	var getElementLeft = function(element){
		var actualLeft = element.offsetLeft;
		var current = element.offsetParent;
		while (current != null){
			actualLeft += current.offsetLeft;
			current = current.offsetParent;
		}
		return actualLeft;
	};
	var getElementTop = function(element){
		var actualTop = element.offsetTop;
		var current = element.offsetParent;
		while (current != null){
			actualTop += current.offsetTop;
			current = current.offsetParent;
		}
		return actualTop;
	};
	function showHint(str)
	{	
		var request = new XMLHttpRequest();
		request.open("GET","wenzi.php?text="+str,true);
		request.responseType = 'json';
		request.send();
		request.onload=function()
		{
			if (request.readyState==4 && request.status==200)
			{
				removeAllChild("shows");
				createDT(this.response,"li","shows");
			}
		}
		$('.suggest').show().css({
			top:$('.search_text').offset().top+$('.search_text').height(),
    	    left:$('.search_text').offset().left,
    	    position:'absolute'
			//width:'200px',
    	   // width:$('.search_text').offset().width,
    		//padding:$('.search_text').offset().padding,
    		//position:'absolute'
    	});
	}

	function createDT(text,table,id){
		if(text != null){
			for(var i=0; i<text.length; i++){
				var ele = document.createElement(table);
				var node = document.createTextNode(text[i]);
				ele.appendChild(node);
				var element = document.getElementById(id);
				element.appendChild(ele);
			}
		}
		//document.getElementById('search_suggest').style.top =  getElementLeft(document.getElementById('search_text'))+'px';
	    //document.getElementById('search_suggest').style.left = getElementTop(document.getElementById('search_text'))+'px';
		//document.getElementById('search_suggest').style.position = 'absolute';
		//document.getElementById('search_suggest').style.display = 'block';

	}

    function removeAllChild(id) {  
        var div = document.getElementById(id);
        //console.log(div);
        //if(div.hasChildNodes())
        while (div.hasChildNodes()) { //当div下还存在子节点时 循环继续  
            div.removeChild(div.firstChild);   
        }  
    }
	</script>
</head>
<body>
<form action="wenzisearch.php" method="post" enctype="multipart/form-data" style="position: relative;">
	请输入关键字：<input type="text" name="text" onkeyup="showHint(this.value)" id="search_text">
	<button  class="submit">搜索</button>
	<div class="suggest" id="search_suggest" style="display: none;">
        <ul>
        	<li id="shows">one</li>
        </ul>
	</div>
</form>
</body>
</html>